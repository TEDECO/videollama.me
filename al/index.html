<!doctype html>
<html class="no-js" lang="es">

<head>
  <meta charset="utf-8">
  <title>videollama.me</title>
  <meta name="description" content="Sistema de videoconferencia basado en jitsi enfocado a simplificar su uso para personas mayores sin conocimientos tecnológicos.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="manifest" href="/img/manifest.json">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage" content="/img/ms-icon-144x144.png">
  <meta name="theme-color" content="#000000">

  <meta property="og:title" content="Videollama a los tuyos de forma fácil, libre y segura">
  <meta property="og:url" content="https://videollama.me/">
  <meta property="og:image" content="https://videollama.me/img/facebook-share.png" />
  <meta property="og:description" content="Videollama.me es un sistema de videoconferencia basado en el software libre Jitsi enfocado a simplificar su uso para personas mayores sin conocimientos tecnológicos. Está desarrollado por el grupo de investigación TEDECO de la UPM dentro del proyecto TechPeopleCare.">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
  <!--<link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="/css/main.css">-->

<style>

  p {
    padding-bottom: 10px;
  }

  ol {
    padding-left: 30px;
  }

  html, body, #video, #inicio, #ayuda {
    background-color:#000;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    color: #eee;
  }

  #inicio img {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200px;
    height: 200px;
    margin-top: -100px;
    margin-left: -100px;
    cursor: pointer;
  }

  #video, #fin, #ayuda {
    display: none;
  }

  #fin img {
    position: absolute;
    bottom: 20px;
    z-index: 999;
    left: 50%;
    width: 100px;
    height: 100px;
    margin-top: -50px;
    margin-left: -50px;
    cursor: pointer;
  }

  #ayuda {
    position: absolute;
    top: 0;
    left: 0;
    font-size: 1.4em;
    font-weight: bold;
    color: #000 !important;
    z-index: 2;
    background-image: url("https://www.toptal.com/designers/subtlepatterns/patterns/diamond_upholstery.png") ;
background-size: 25px;
  }
  #ayuda p, #ayuda ol li {
    color: #333 !important;
    line-height: 55px;
    font-weight: 300;
  }
</style>

</head>

<body>
  <!--[if IE]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->

  <div id="inicio">
    <img src="../img/dedito.gif" width="200" height="200">
  </div>

  <div id="ayuda">
<section>
  <div class="hero-body">    
    <div class="container">
    <p>Si este es el móvil o tablet para la persona mayor, recuerde <b>crear un acceso directo</b> a la videollamada en el escritorio.</br> Hágalo en tres pasos simples:</p>
    <ol>
      <li>Despliega el menú del navegador en la esquina superior derecha:<br><img src="../img/ayuda1.jpg"></li>
      <li>Elige la opción <b>"Añadir a pantalla de inicio"</b><br><img src="../img/ayuda2.jpg"></li>
      <li>Pulsa <b>"Añadir"</b><br><img src="../img/ayuda3.jpg"></li>
    </ol>
    <div class="buttons is-right" style="margin-top:50px;"><button class="button is-large" id="continuar">Continuar</button></div>
    </div>
  </div>
</section>
</div>

  <div id="video"></div>

  <div id="fin">
    <img src="/img/colgar.png" width="100" height="100">
  </div>

  <script src="../js/vendor/modernizr-3.8.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="../js/vendor/jquery-3.4.1.min.js"><\/script>')</script>


<script src='https://meet.jit.si/external_api.js'></script>
<script>
$(function() {
  // Opciones de configuración de jitsi
  const servidorjitsi = 'meet.jit.si';
  const opciones = {
    roomName: dameSala(),
    width: '100%',
    height: '100%',
    configOverwrite: {
        defaultLanguage: 'es',
        disableDeepLinking: true
    },
    interfaceConfigOverwrite: {
        DEFAULT_BACKGROUND: '#612d620',
        TOOLBAR_ALWAYS_VISIBLE: true,
        TOOLBAR_BUTTONS: [],
        SHOW_JITSI_WATERMARK: false,
        SHOW_WATERMARK_FOR_GUESTS: false,
        SHOW_POWERED_BY: true,
        AUTHENTICATION_ENABLE: false,
        SETTINGS_SECTIONS: [],
        DEFAULT_REMOTE_DISPLAY_NAME: 'Familiar',
        DEFAULT_LOCAL_DISPLAY_NAME: '',
        OPTIMAL_BROWSER: [ 'chrome', 'chromium', 'firefox', 'nwjs', 'electron' ],
    },
    //onload: openFullscreen(),
    parentNode: document.getElementById('video')
  };

  // Funciones auxiliares
  function dameSala() {
    var sala = window.location.href.split('?tf=');
    (sala.length == 2)?sala=sala[1]:sala='TEDECO';
    return sala;
  }

  function hasVisitadoSala() {
    var galletas = document.cookie.split(';');
    var sala = dameSala();
    if (document.cookie.indexOf('salas=') < 0) document.cookie = "salas="+encodeURIComponent(sala)+"; path=/";
    for(var i=0;i < galletas.length;i++) {
      var galleta = galletas[i].split('=');
      if ((galleta.length == 2) && (galleta[0] == "salas")) {
        galleta = decodeURIComponent(galleta[1]);
        console.log("Has visitado estas salas previamente: "+galleta);
        if (galleta.indexOf(sala) > -1) {
          return true;
        } else {
          document.cookie = "salas="+encodeURIComponent(galleta + "," + sala)+"; path=/";
        }
      }
    }
    return false;
  }


  function aPantallaCompleta() {
    if (!document.fullscreenElement &&    // alternative standard method
        !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
      if (document.documentElement.requestFullscreen) {
        document.documentElement.requestFullscreen();
      } else if (document.documentElement.msRequestFullscreen) {
        document.documentElement.msRequestFullscreen();
      } else if (document.documentElement.mozRequestFullScreen) {
        document.documentElement.mozRequestFullScreen();
      } else if (document.documentElement.webkitRequestFullscreen) {
        document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      }
    }
  }

  function iniciarJitsi() {
    var api = new JitsiMeetExternalAPI(servidorjitsi, opciones);
    //api.executeCommand('toggleTileView');
    //api.executeCommand('toggleFilmStrip');
    api.executeCommand('displayName', '');
    api.executeCommand('avatarUrl', 'https://videollama.me/img/abuelos.jpg');
    api.on('readyToClose', function(){ location.reload() });
    $('#fin').fadeIn();
    $('#fin img').on('click', function(e) {
      e.preventDefault();
      api.executeCommand('hangup');
    });
  }

  // MAIN
  if (!hasVisitadoSala()) $('#ayuda').fadeIn();
  $('#continuar').on('click', function(e) {
    $('#ayuda').fadeOut();
  });
  $('#inicio img').on('click', function(e) {
    aPantallaCompleta();
    if ($('#video').is(':hidden')) {
       $('#inicio').fadeOut();
       $('#video').fadeIn();
       iniciarJitsi();
    }
  });
});

</script>

</body>

</html>
